import Unit from './unit'
import UnitShape, {UnitBasisType, UnitShapeMap} from './unitShape'

export class SimpleUnit extends Unit {
    scaleToBaseSI: number
    oneOverScale: number

    constructor(
        shape: UnitBasisType | UnitShapeMap | UnitShape, scaleToBaseSI: number, 
        name:string, abbreviation?: string, otherNames?: Array<string>
    ){
        super(shape, name, abbreviation, otherNames)
        this.scaleToBaseSI = scaleToBaseSI
        this.oneOverScale = 1/scaleToBaseSI
    }

    toBaseSI(x: number) { return this.scaleToBaseSI * x }
    fromBaseSI(x: number) { return this.oneOverScale * x}

    static Relative(name:string, relativeTo:SimpleUnit, relativeScale:number, abbreviation?: string): SimpleUnit{
        return new SimpleUnit(
            relativeTo.shape,
            relativeTo.scaleToBaseSI * relativeScale,
            name,
            abbreviation
        )
    }
}

export default SimpleUnit
